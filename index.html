<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="./node_modules/vue/dist/vue.min.js"></script>
  <script src="./lib/index.js"></script>
  <link rel="stylesheet" href="./lib/theme-chalk/index.css">
</head>
<body>
  <div id="app">
    <s-table-con
    :data="tableData"
    showPagination
    border
    :columns="columns"
    show-summary
    :pagination="pagination"
    style="width: 100%">
  </s-table-con>
  </div>
  <script>
    new Vue({
      data: function () {
        return {
          pagination: {
            'page-sizes':[5, 10, 20, 50],
            'page-size': 5,
            'current-page': 2,
            background: true,
            layout:"total, prev, pager, next, sizes, jumper"
          },
          columns: [
            { type: 'index', width: 100},
            { label: 'ID', prop: 'id' },
            { label: '姓名', prop: 'name' },
            { label: '数值 1（元）', prop: 'amount1' },
            { label: '数值 2（元）', prop: 'amount2' },
            { label: '数值 3（元）', prop: 'amount3' },
          ],
          tableData: this.loadData,
          tempData: {
            '1': {
              pageNo: 1,
              pageSize: 5,
              total: 200,
              list: [
                { id: '1', name: '王小虎1', amount1: '234', amount2: '3.2', amount3: 10},
                { id: '2', name: '王小虎2', amount1: '234', amount2: '3.2', amount3: 10},
                { id: '3', name: '王小虎3', amount1: '234', amount2: '3.2', amount3: 10},
                { id: '4', name: '王小虎4', amount1: '234', amount2: '3.2', amount3: 10},
                { id: '5', name: '王小虎5', amount1: '234', amount2: '3.2', amount3: 10},
              ]
            },
            '2': {
              pageNo: 1,
              pageSize: 5,
              total: 200,
              list: [
                { id: '2-1', name: '2-王小虎1', amount1: '234', amount2: '3.2', amount3: 10},
                { id: '2-2', name: '2-王小虎2', amount1: '234', amount2: '3.2', amount3: 10},
                { id: '2-3', name: '2-王小虎3', amount1: '234', amount2: '3.2', amount3: 10},
                { id: '2-4', name: '2-王小虎4', amount1: '234', amount2: '3.2', amount3: 10},
                { id: '2-5', name: '2-王小虎5', amount1: '234', amount2: '3.2', amount3: 10},
              ]
            },
            '3': {
              pageNo: 1,
              pageSize: 5,
              total: 200,
              list: [
                { id: '3-1', name: '3-王小虎1', amount1: '234', amount2: '3.2', amount3: 10},
                { id: '3-2', name: '3-王小虎2', amount1: '234', amount2: '3.2', amount3: 10},
                { id: '3-3', name: '3-王小虎3', amount1: '234', amount2: '3.2', amount3: 10},
                { id: '3-4', name: '3-王小虎4', amount1: '234', amount2: '3.2', amount3: 10},
                { id: '3-5', name: '3-王小虎5', amount1: '234', amount2: '3.2', amount3: 10},
              ]
            }
          }
        }
      },
      methods: {
        loadData (params) {
          console.log(params, '====')
          return new Promise(resolve => {
            setTimeout(() => {
              this.tempData[params.pageNo].pageSize = params.pageSize
              resolve(this.tempData[params.pageNo])
            }, 1000)
          })
        },
        arraySpanMethod({ row, column, rowIndex, columnIndex }) {
          if (rowIndex % 2 === 0) {
            if (columnIndex === 0) {
              return [1, 2];
            } else if (columnIndex === 1) {
              return [0, 0];
            }
          }
        },
        getSummaries(param) {
          const { columns, data } = param;
          const sums = [];
          columns.forEach((column, index) => {
            if (index === 0) {
              sums[index] = '总价';
              return;
            }
            const values = data.map(item => Number(item[column.property]));
            if (!values.every(value => isNaN(value))) {
              sums[index] = values.reduce((prev, curr) => {
                const value = Number(curr);
                if (!isNaN(value)) {
                  return prev + curr;
                } else {
                  return prev;
                }
              }, 0);
              sums[index] += ' 元';
            } else {
              sums[index] = 'N/A';
            }
          });

          return sums;
        },
        toggleSelection(rows) {
          if (rows) {
            rows.forEach(row => {
              this.$refs.multipleTable.toggleRowSelection(row);
            });
          } else {
            this.$refs.multipleTable.clearSelection();
          }
        },
        handleSelectionChange(val) {
          console.log(val, '==========')
          this.multipleSelection = val;
        },
        handleChange (v) {
          console.log(v)
        },
        handleClick (v) {
          console.log('click', v)
        },
        open1() {
        this.$message('这是一条消息提示');
      },
      open2() {
        this.$message({
          message: '恭喜你，这是一条成功消息',
          type: 'success'
        });
      },

      open3() {
        this.$message({
          message: '警告哦，这是一条警告消息',
          type: 'warning'
        });
      },

      open4() {
        this.$message.error('错了哦，这是一条错误消息');
      }
      }
    }).$mount('#app')
  </script>
</body>
</html>